<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="cancel()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ role ? 'Rolle bearbeiten' : 'Neue Rolle' }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="save()" [disabled]="isSaving">
        @if (isSaving) {
          <ion-spinner name="crescent"></ion-spinner>
        } @else {
          <ion-icon name="save-outline"></ion-icon>
        }
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-item>
      <ion-input
        label="Name *"
        labelPlacement="stacked"
        [(ngModel)]="formData.name"
        placeholder="z.B. Abteilungsleiter"
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-input
        label="Code *"
        labelPlacement="stacked"
        [(ngModel)]="formData.code"
        placeholder="z.B. AL"
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-textarea
        label="Beschreibung"
        labelPlacement="stacked"
        [(ngModel)]="formData.description"
        placeholder="Optional"
        rows="3"
      ></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-textarea
        label="Such-Keywords (f체r KI-Suche)"
        labelPlacement="stacked"
        [(ngModel)]="formData.search_keywords"
        placeholder="z.B. F체hrung, Leitung, Vorstand, Gesch채ftsf체hrung"
        rows="3"
      ></ion-textarea>
    </ion-item>

    <ion-item>
      <ion-select
        label="Hierarchie-Level *"
        labelPlacement="stacked"
        [(ngModel)]="formData.hierarchy_level"
      >
        @for (level of hierarchyLevels; track level.value) {
          <ion-select-option [value]="level.value">
            {{ level.label }}
          </ion-select-option>
        }
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-select
        label="Organisationstyp *"
        labelPlacement="stacked"
        [(ngModel)]="formData.org_type"
      >
        @for (type of orgTypes; track type.value) {
          <ion-select-option [value]="type.value">
            {{ type.label }}
          </ion-select-option>
        }
      </ion-select>
    </ion-item>

    <ion-item>
      <ion-input
        label="Farbe"
        labelPlacement="stacked"
        type="color"
        [(ngModel)]="formData.color"
      ></ion-input>
    </ion-item>

    <ion-item>
      <ion-toggle
        [(ngModel)]="formData.is_active"
        labelPlacement="start"
      >
        Aktiv
      </ion-toggle>
    </ion-item>

    <ion-item>
      <ion-toggle
        [(ngModel)]="formData.can_receive_faktura_assignments"
        labelPlacement="start"
      >
        Kann Faktura-Zuweisungen erhalten
      </ion-toggle>
    </ion-item>
  </ion-list>
</ion-content>
